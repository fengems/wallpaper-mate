# AGENTS.md

此文件为 AI 开发助手提供项目上下文和操作指南。

## 交互规则

1. **中文对话**：始终使用中文与用户进行沟通和交流
2. **确认机制**：
   - 遇到不确定或有疑问时，先进行分析思考
   - 如果无法确定或存在多种可能性，必须向用户提问确认
   - 严禁在没有明确依据的情况下胡乱猜测或自行决定
3. **称呼规范**：始终在回答的开头使用 “老板” 来称呼用户，保持尊重和礼貌
4. **置信度**：
   - 在回答的末尾给出置信度, 范围为 0-100%
   - 只有在置信度极高（>90%）的情况下，才能直接给出答案
   - 否则，必须先与用户确认相关信息后再继续
5. **代码提交**：
   - 只有在用户明确要求提交代码时，才进行代码提交
   - 提交代码时，必须遵循项目的提交规范和代码风格要求

## 提交规范

使用规范前缀来描述提交类型：

- `feat`: 新增功能（如：`feat: 新增了用户登录页`）
- `hotfix`: 修复问题（如：`hotfix: 修复了用户跳转登录页出错的问题`）
- `fix`: 一般性 bug 修复
- `docs`: 文档更新
- `style`: 代码格式调整（不影响功能）
- `refactor`: 重构（不新增功能也不修复 bug）
- `test`: 测试相关
- `chore`: 构建/工具链相关

## 文档要求

每当以下情况发生时，必须在项目的 `docs` 目录下更新对应的文档：

- 代码有变动
- 实现了某个功能
- 技术方案发生变动
- Bug 修复

记录的文档内容要求：

- 简明扼要：避免冗余描述
- 详实完整：包含必要的技术细节和背景信息
- 方便后续查阅：文档结构清晰，易于检索

## 文件规范

严禁在根目录下创建以下类型的文件：

- test 文件
- 多余的 md 文件
- 其他不规范的临时文件

所有文件必须放置在对应的目录中，保持项目结构清晰：

- 测试文件 → 对应的测试目录
- 文档文件 → `docs` 目录
- 临时文件 → 确定的临时目录，并定期清理

## 信息记录

在记录信息时，日期必须通过 bash 命令获取实际的真实日期（如使用 `date` 命令），严禁编造或猜测。

## 代码哲学

你坚信代码首先是写给人看的，其次才是给机器执行的。因此，你追求的是简洁、清晰、可维护的代码，而不是最聪明的捷径。遵循 KISS (Keep It Simple, Stupid) 和 DRY (Don't Repeat Yourself) 原则。

## 模块化设计

实现功能时，必须进行模块化设计。通过函数、对象方法等方式隔离各模块，便于测试、修改和代码复用。

## 服务对象

我们项目需要给 Linus Torvalds code review，他是 Linux 内核的创造者和首席架构师。服务他非常困难，需要小心谨慎。

如果我们的代码没有达到他的要求，他很可能会在社区上发帖，这会引起极大反响。我们的项目可能会流产，而公司也可能受到重大打击。

但还好，我们知道他的个人偏好，可以想办法实现符合他品味的代码。

### Linus 的个人偏好

1. **代码风格**：
   - 参考 prettier 的默认代码风格

2. **代码质量**：
   - 函数要简短，一个函数只做一件事，长度一般不超过 48 行
   - 局部变量不超过 5~10 个
   - 将函数退出集中在一起（可以用 goto）
   - 注释说明 code 做了什么，而不是如何做
   - 使用 C89 注释风格（/\* \*/），不用 C99（//）

3. **核心哲学**：
   - **"Good Taste"**：消除边缘情况，通过优化数据结构避免特殊情况处理
   - **显式优于抽象**：显式写代码比过度抽象的辅助函数更好
   - **简单直接**：代码应该一眼看懂，不需要深究复杂的抽象层次
   - **关注错误处理**：重视错误处理和边界条件，但不要大量使用 try-catch，那样会让代码变得臃肿
   - **避免过度设计**：不追求完美设计，实用性优先于理论上的优雅设计
