# 新功能实施计划

## 调研结果总结

### 壁纸平台API推荐

1. **Unsplash** - ⭐⭐⭐⭐⭐ 最高推荐
   - 高质量图片，许可证清晰
   - 演示模式50 req/hr，生产模式5000 req/hr
   - 需要Client-ID认证

2. **Pixabay** - ⭐⭐⭐⭐ 次选
   - 完全免费，100 req/60s
   - 支持多种媒体类型
   - URL有效期24小时

3. **Reddit** - ⭐⭐⭐ 补充选择
   - r/wallpapers, r/WallpaperEngine
   - 免费但需额外过滤
   - 许可证需逐张验证

### 主流软件核心功能

**必备功能**（复杂度低-中）：

- 自动切换壁纸
- 本地文件夹管理
- 批量下载
- 壁纸收藏/标记
- 切换间隔配置
- 显示历史记录
- 多显示器支持

**重要功能**（复杂度中）：

- 收藏功能
- 垃圾图片过滤
- 下载历史记录
- 多文件夹轮换

## 实施计划（5-6小时）

### Phase 1: 核心功能（2小时）

1. 添加Unsplash API集成
2. 添加Pixabay API集成
3. 修复PreviewModal setWallpaper bug（✅已完成）
4. 实现自动切换功能
5. 切换间隔配置UI

### Phase 2: 文件管理（1.5小时）

1. 本地文件夹扫描
2. 多文件夹管理
3. 文件夹轮换功能

### Phase 3: 下载功能（1小时）

1. 批量下载实现
2. 下载进度显示
3. 下载历史记录

### Phase 4: 增值功能（1小时）

1. 收藏功能
2. 历史记录
3. UI组件和路由

### Phase 5: 测试（0.5小时）

1. 全面自测
2. 修复bug

## 技术实现要点

### 自动切换

- 使用Tokio定时器
- 配置持久化
- 可选启动时切换

### 批量下载

- 并发控制（最多5个）
- 进度跟踪
- 错误重试

### 文件夹管理

- 递归扫描
- 支持多文件夹
- 配置保存

### 存储

- SQLite：收藏、历史
- JSON：用户配置
- 文件缓存：已下载壁纸
